## 聊天服务
本节实现的聊天服务非常简单，由服务端程序和客户端程序组成，协议如下：
* 服务端程序在某个端口侦听（listen）新的连接。   
* 客户端向服务端发起连接。   
* 连接建立之后，客户端随时准备接收服务端的消息并在屏幕上显示出来。   
* 客户端接受键盘输入，以回车为界，把消息发送给服务端。   
* 服务端接收到消息之后，依次发送给每个连接到它的客户端；原来发送消息的客户端进程也会收到这条消息。   
* 一个服务端进程可以同时服务多个客户端进程。当有消息到达服务端后，每个客户端进程都会收到同一条消息，服务端广播发送消息的顺序是任意的，不一定哪个客户端会先收到这条消息。   
* （可选）如果消息A先于消息B到达服务端，那么每个客户端都会先收到A再收到B。

与前面的“五个简单TCP协议”不同，聊天服务的特点是“连接之间的数据有交流，从a连接收到的数据要发给b连接。这样对连接管理提出了更高的要求：
* 如何用一个程序同时处理多个连接？fork()-per-connection似乎是不行的。
* 如何防止串话？b有可能随时断开连接，而新建立的连接c可能恰好复用了b的文件描述符，那么a会不会错误地把消息发给c？”

muduo的这个例子充分展示了解决以上问题的手法。

